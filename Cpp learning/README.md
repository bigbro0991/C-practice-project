# 核心编程：

- C++中在程序运行前分为全局区和代码区
- 代码区特点是共享和只读
- 全局区中存放全局变量、静态变量、常量
- 常量区中存放 const修饰的全局常量 和 字符串常量

### 栈区：

栈（Stack）是用来静态分配内存的而堆是动态分配内存的，它们都是存在于计算机内存之中。
 栈的分配是在程序编译的时候完成的，直接存储在内存中，接触内存很快。栈是后进先出的顺序，最后被申请的块最先被释放，这样就很容易跟踪到栈，释放栈的过程简单到仅仅是移动下指针就能完成。

- 面向线程，栈区的数据还函数执行完自动释放
- 形参，局部变量，也会放在栈区
- 栈： 在函数调用时，第一个进栈的是主函数中后的下一条指令（函数调用语句的下一条可执行语句）的地址，然后是函数的各个参数，在大多数的C编译器中，参数是由右往左入栈的，然后是函数中的局部变量。注意静态变量是不入栈的。
   当本次函数调用结束后，局部变量先出栈，然后是参数，最后栈顶指针指向最开始存的地址，也就是主函数中的下一条指令，程序由该点继续运行。
- 栈区数据注意事项：不要返回局部变量地址；第一次保留，第二次就释放。
- 常量区中存放 const 修饰的全局常量 和 字符串常量

### 堆区：

堆（heap）的分配是在程序运行时完成的，分配速度较为缓慢，但是堆的可用空间非常的大。堆中的元素相互之间没有关联，各自都可以被任何时候随机访问。我们可以任何时候申请和释放一块内存，这样会使得我们很难随时随地追踪到堆中某块位置被分配了还是被释放了。
 当你知道在编译前需要分配多少数据时且数据量不是很大时可以使用栈。如果不知道在运行时需要多少数据那么就该使用堆。

- 堆区数据由程序员管理开辟和释放
- 堆区数据利用new关键字进行开辟内存

### new 运算符

在heap区开辟数据和数组等

new 数据类型

```c++
//ex：
new int[10] // return consecutive area
new int(10) // return the pointer to this int
```

- 堆区数据由程序员管理开辟和释放(new 开辟，delete 释放)
- 堆区数据利用new关键字进行开辟内存
- delete p or delete[] arr

### 引用

##### 作用：给变量起别名

##### 语法：数据类型 &别名 = 原名

```c++
int a = 10;
//a---->[10]
//b---->[10]同一块
int &b = a;
b=20;//== (a=20);
```

##### 注意事项：

- 引用必须要初始化，必须开始说明它是谁的别名
- 一旦初始化，就不可以更改，别名初始化后不能变成别人的别名

#### 引用做函数参数

##### 作用：让形参修饰实参

##### 优点：简化指针修改实参

```c++
//main里的实参a,b 直接传入，由别名修饰，改变的话实参改变
//别名可以和原名一样
void swap(&a,&b)
{
	int temp = a;
	a = b;
	b = temp
}
```

> 总结：通过引用参数产生的效果同按地址传递是一样的。引用的语法更清楚简单